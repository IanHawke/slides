<!doctype html>
<html lang="en">
    <head>
        
            <meta charset="utf-8">
            <meta name="robots" content="noindex">
            <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
            <meta name="author" content="Ian Hawke" />
            <meta name="date" content="2022-01-25" />
        

        <title>Lab 7 outline | Operational Research and Mathematical Computing</title>

        
    
    
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="../../static/styles.css">
            <link rel="stylesheet" id="customiseCSS" href="../../static/light.css">
            
            
        
    <link rel="stylesheet" id="customiseCodeCSS" href="../../static/pygmentize.light.css">
    <link rel="stylesheet" href="../../static/codemirror-5.26.0/lib/codemirror.css">
    <link rel="stylesheet" href="../../static/boole.css">
    <link rel="stylesheet" href="../../static/numbasEmbed.css">

    <link rel="stylesheet" href="../../static/bootstrap-toc.css?v=3">
    <link rel="stylesheet" href="../../static/print.css">


        
    
    
            <script defer src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
            <script defer src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
            <script defer src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
            <script defer src="../../static/mathjax_config.js"></script>
            <script type="text/javascript" id="MathJax-script" defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
            <script defer src="../../static/customisation.js"></script>
            <script defer src="../../static/mp4.js"></script>
            
            
        
    <script defer src="../../static/jquery.flexibleArea.js"></script>
    <script defer src="../../static/spin.min.js"></script>
    <script defer src="../../static/codemirror-5.26.0/lib/codemirror.js"></script>
    <script defer src="../../static/codemirror-5.26.0/mode/octave/octave.js"></script>
    <script defer src="../../static/codemirror-5.26.0/mode/python/python.js"></script>
    <script defer src="../../static/codemirror-5.26.0/mode/r/r.js"></script>
    <script defer src="../../static/boole.js"></script>
    <script defer src="../../static/numbasEmbed.js"></script>

    <script defer src="../../static/bootstrap-toc.js"></script>

    </head>
    <body data-spy="scroll" data-target="#chapterTOC" data-offset="50">
        
<div class="collapse" id="navbarToggleCustomise">
	<div class="bg-secondary text-white p-3">
		<form onsubmit="return false;" id="navbarCustomise">
			<div class="form-row">
				<label>Theme Customisation</label>
				<div id="themeSelector" class="form-group col-md-12">
					<button class="btn btn-dark mr-2" value="dark">Dark</button>
					<button class="btn btn-pastel mr-2" value="pastel">Pastel</button>
					<button class="btn btn-light mr-4" value="light">Light</button>
				</div>
			</div>
			<div class="form-row">
				<div class="form-group col-md-4">
					<label style="display: block" for="font-scale">Font size (<span id="font-size-display">100%</span>)</label>
					<input type="range" class="form-control-range col-9 mr-2" id="font-scale" min="50" max="600" value="100">
					<button id="font-scale-reset" class="btn btn-sm">Reset</button>
				</div>
				<div class="form-group col-md-4">
					<label style="display: block" for="p-space">Spacing (<span id="p-space-display">100%</span>)</label>
					<input type="range" class="form-control-range col-9 mr-2" id="p-space" min="0" max="600" value="100">
					<button id="p-space-reset" class="btn btn-sm">Reset</button>
				</div>
			</div>
		</form>
	</div>
</div>

<nav aria-label="breadcrumb">
	<ul class="breadcrumb">
		<li class="breadcrumb-item">
			<a href="../../index.html">Operational Research and Mathematical Computing</a>
		</li>
		
		<li class="breadcrumb-item">
			<a href="../../lab_notes/index.html">Lab notes</a>
		</li>
		
		<li class="breadcrumb-item active">
			Lab 7 outline
		</li>
		<li class="ml-auto">
			<button class="navbar-toggler p0" type="button" data-toggle="collapse" data-target="#navbarToggleCustomise" aria-controls="navbarToggleCustomise" aria-expanded="false" aria-label="Toggle customisations panel">
				<i class="fa fa-cog" aria-hidden="true" title="Toggle customisations panel"></i> <span class="sr-only">Toggle customisations panel</span>
			</button>
		</li>
	</ul>
</nav>


        <header>
            
            
        </header>
        <main>
            
    <div class="container mt-3">
        <div class="row">
            
            <div id="sidebar" class="col-md-3">
                <nav class="mb-3" id="chapterTOC" data-toggle="toc">
                    <ul class="nav navbar-nav">
                        
                        
                        <li><a id="notebook-link" class="nav-link" href="../../lab_notes/lab_7_outline/lab_7_outline.ipynb" download><i class="fa fa-book" aria-hidden="true" title="Download Notebook"></i>&nbsp;Download Notebook</a></li>
                        
                        
                        <li><a id="pdf-link" class="nav-link" href="../../lab_notes/lab_7_outline/lab_7_outline.pdf" target="_blank"><i class="fa fa-file-pdf-o" aria-hidden="true" title="Download as PDF"></i>&nbsp;Download as PDF</a></li>
                        
                    </ul>
                </nav>
            </div>
            <div id="content" class="col-md-9"> 
            
            <section class="section1"><h1>Week 7</h1>
<p>In previous weeks we have dealt with most of the structures we need. Now we should do some more advanced plotting.</p>
<section class="section2"><h2>Script</h2>
<section class="section3"><h3><code>networkX</code></h3>
<p>We have seen that algorithms on graphs, such as the shortest path analysis, are important parts of Operational Research. It's useful to visualize these.</p>
<p>First we want to consider what data structures we need in order to describe a graph. A graph is described by the set of nodes and the edges joining them. Let's consider a simple graph with three nodes <script type="math/tex">1, 2, 3</script> and two edges joining <script type="math/tex">1 \to 2</script> and <script type="math/tex">1 \to 3</script>:</p>
<div class="highlight"><pre><span></span><span class="n">nodes</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">edge1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">edge2</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">edges</span> <span class="o">=</span> <span class="p">(</span><span class="n">edge1</span><span class="p">,</span> <span class="n">edge2</span><span class="p">)</span>
</pre></div>
<p>For now this is just a set of conventions: the container <code>nodes</code> contains the identifiers of the nodes, and the container <code>edges</code> contains pairs of nodes, identifying which nodes are connected by each edge.</p>
<p>The <code>networkX</code> library allow us to combine the conventions in a single object:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">networkx</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="n">G</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>
<span class="n">G</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="n">edges</span><span class="p">)</span>
</pre></div>
<p>We can then plot the graph object. To do this, <code>networkX</code> uses <code>matplotlib</code> in the background, so many of the commands will be linked to <code>matplotlib</code> commands:</p>
<div class="highlight"><pre><span></span><span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span>

<span class="n">pyplot</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">networkx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>
<span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
<figure class="figure1" data-title="png"><img alt="png" src="images/07-Lab-Week-7_12_0.png"/></figure><p>This isn't very helpful. We need to add the node labels:</p>
<div class="highlight"><pre><span></span><span class="n">pyplot</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">networkx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">G</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
<figure class="figure2" data-title="png"><img alt="png" src="images/07-Lab-Week-7_14_0.png"/></figure><p>This is more understandable. Note that the drawing order makes no use of the label information!</p>
<p>We will often want to add additional information to the edges. For example, we may want to add a cost to move along an edge. <code>networkX</code> allows us to add general additional information to an edge, or node, using dictionaries.</p>
<p>Let us create a new graph and add one node at a time:</p>
<div class="highlight"><pre><span></span><span class="n">H</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
<span class="n">H</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">city</span><span class="o">=</span><span class="s1">'London'</span><span class="p">)</span>
<span class="n">H</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">city</span><span class="o">=</span><span class="s1">'Southampton'</span><span class="p">)</span>
<span class="n">H</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">city</span><span class="o">=</span><span class="s1">'Reading'</span><span class="p">)</span>
</pre></div>
<p>We can now check individual nodes and see how the additional information is stored:</p>
<div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">H</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">H</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">H</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s1">'city'</span><span class="p">])</span>
</pre></div>
<div class="highlight"><pre><span></span>[1, 2, 3]
{'city': 'London'}
Southampton
</pre></div>
<p>The obejct <code>H.nodes</code> acts like a dictionary. Each label (here a number) is a key, giving access to additional individual node information. This information is itself a dictionary. The <code>city</code> attribute acts as a key to this dictionary in this case.</p>
<p>We can do similar things with edges:</p>
<div class="highlight"><pre><span></span><span class="n">H</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="mi">79</span><span class="p">)</span>
<span class="n">H</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="mi">49</span><span class="p">)</span>
</pre></div>
<p>Now when we plot the graph, we can add in the additional information. First we need to decide on a layout; the default is <code>spring_layout</code>. That gives us the positions of the nodes, which we use when adding the labels:</p>
<div class="highlight"><pre><span></span><span class="n">pyplot</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">positions</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">H</span><span class="p">)</span>
<span class="n">networkx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="n">positions</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">edge_labels</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">get_edge_attributes</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="s1">'distance'</span><span class="p">)</span>
<span class="n">networkx</span><span class="o">.</span><span class="n">draw_networkx_edge_labels</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="n">positions</span><span class="p">,</span> <span class="n">edge_labels</span><span class="o">=</span><span class="n">edge_labels</span><span class="p">)</span>
<span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
<figure class="figure3" data-title="png"><img alt="png" src="images/07-Lab-Week-7_24_0.png"/></figure><p>We can use similar commands to label the nodes as well as the edges:</p>
<div class="highlight"><pre><span></span><span class="n">pyplot</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">positions</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">spring_layout</span><span class="p">(</span><span class="n">H</span><span class="p">)</span>
<span class="n">networkx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="n">positions</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">node_labels</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">get_node_attributes</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="s1">'city'</span><span class="p">)</span>
<span class="n">edge_labels</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">get_edge_attributes</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="s1">'distance'</span><span class="p">)</span>
<span class="n">networkx</span><span class="o">.</span><span class="n">draw_networkx_labels</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="n">positions</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">node_labels</span><span class="p">)</span>
<span class="n">networkx</span><span class="o">.</span><span class="n">draw_networkx_edge_labels</span><span class="p">(</span><span class="n">H</span><span class="p">,</span> <span class="n">positions</span><span class="p">,</span> <span class="n">edge_labels</span><span class="o">=</span><span class="n">edge_labels</span><span class="p">)</span>
<span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
<figure class="figure4" data-title="png"><img alt="png" src="images/07-Lab-Week-7_26_0.png"/></figure><section class="section5"><h5>Exercise</h5>
<p>The distances from Southampton to various UK locations, in miles, are (see, e.g, <a href="http://www.driving-distances.com/uk-route-planner-mileage.php">http://www.driving-distances.com/uk-route-planner-mileage.php</a>)</p>
<table>
<thead>
<tr>
<th>Location</th>
<th>Miles</th>
</tr>
</thead>
<tbody>
<tr>
<td>London</td>
<td>79</td>
</tr>
<tr>
<td>Reading</td>
<td>47</td>
</tr>
<tr>
<td>Brighton</td>
<td>69</td>
</tr>
<tr>
<td>Exeter</td>
<td>110</td>
</tr>
<tr>
<td>Salisbury</td>
<td>23</td>
</tr>
<tr>
<td>Bath</td>
<td>64</td>
</tr>
</tbody>
</table>
<p>Construct the resulting graph.</p>
</section></section></section></section>
            </div>
        </div>
    </div>

        </main>
		
		<footer class="text-muted">
	<hr>
	<div class="container">
		<div class="float-right">
			<ul style="list-style: none">
			<li><a href="#">Back to top</a></li>
			
			
			<li><a href="../../lab_notes/lab_7_outline/lab_7_outline.pdf" target="_blank"><i class="fa fa-file-pdf-o"></i>&nbsp;Download as PDF</a></li>
			
			</ul>
		</div>
		<p>Generated using <a target="_blank" href="https://github.com/chirun-ncl/chirun">Chirun</a>, written by the E-Learning Unit, School of Mathematics &amp; Statistics, Newcastle University</p>
		<p>This page last generated: 2022-01-25</p>
	</div>
</footer>
		
    </body>
</html>
